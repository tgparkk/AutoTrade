[TRADING_STRATEGY]
# 거래 방식 설정
TRADING_MODE=day
DAY_TRADING_EXIT_TIME=15:00

# 종목 스크리닝 (거래량 기반)
VOLUME_INCREASE_THRESHOLD=2.0
VOLUME_MIN_THRESHOLD=100000

# 캔들패턴 + 기술적지표 전략 설정
CANDLE_TECHNICAL_STRATEGY_ENABLED=true
MIN_SIGNAL_CONFIDENCE=0.7
MULTIPLE_INDICATOR_CONFIRM=true

# 포지션 보유기간 관리
MAX_HOLDING_DAYS=1
NEXT_DAY_FORCE_SELL=true
OVERNIGHT_HOLDING_ALLOWED=true

# 테스트 모드 설정
test_mode = false  # true: 시장시간 무관 실행, false: 실제 시장시간만 실행

[RISK_MANAGEMENT]
# 손절/익절 설정
STOP_LOSS_RATE=-0.015
TAKE_PROFIT_RATE=0.03

# 포지션 크기 관리
MIN_POSITION_SIZE=0.10
MAX_POSITION_SIZE=1000000

# 매수 금액 설정 (새로 추가)
BASE_INVESTMENT_AMOUNT=1000000    # 기본 매수 금액 (원)
POSITION_SIZE_RATIO=0.1           # 계좌 대비 포지션 크기 비율 (10퍼센트)
USE_ACCOUNT_RATIO=True           # 계좌 잔고 기반 비율 사용 여부
OPENING_REDUCTION_RATIO=0.5       # 장 초반 투자 금액 비율
PRECLOSE_REDUCTION_RATIO=0.3      # 마감 전 투자 금액 비율
CONSERVATIVE_RATIO=0.7            # 포지션 많을 때 보수적 비율

# 일일 손실 제한
MAX_DAILY_LOSS=-100000
MAX_POSITIONS=5

# 급락장 대응
MARKET_CRASH_PROTECTION=true
MARKET_CRASH_THRESHOLD=-0.03

# 리스크 관리 설정
MAX_DAILY_TRADES=20

[MARKET_SCHEDULE]
# 시장 운영 시간
MARKET_OPEN_TIME=09:00
MARKET_CLOSE_TIME=15:30
PRE_MARKET_SCAN_TIME=08:30

# 거래 활성화
TRADING_ENABLED=true
WEEKEND_TRADING=false

# 장중 휴식 시간 설정 제거됨 (사용하지 않음)

[CANDLE_PATTERN]
# 캔들패턴 분석 설정
PATTERN_ANALYSIS_ENABLED=true
MIN_PATTERN_RELIABILITY=0.7

# 강세 패턴
BULLISH_ENGULFING_WEIGHT=1.0
HAMMER_WEIGHT=0.8
MORNING_STAR_WEIGHT=1.2
PIERCING_LINE_WEIGHT=0.9

# 약세 패턴
BEARISH_ENGULFING_WEIGHT=1.0
SHOOTING_STAR_WEIGHT=0.8
EVENING_STAR_WEIGHT=1.2
DARK_CLOUD_COVER_WEIGHT=0.9

# 중립/지속 패턴
DOJI_WEIGHT=0.5
SPINNING_TOP_WEIGHT=0.3

[TECHNICAL_INDICATORS]
# 이동평균
MA_SHORT_PERIOD=5
MA_LONG_PERIOD=20
MA_CROSSOVER_ENABLED=true

# RSI 설정
RSI_PERIOD=14
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70

# MACD 설정
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# 볼린저 밴드
BB_PERIOD=20
BB_STD_DEV=2.0

# 거래량 지표
VOLUME_MA_PERIOD=20
VOLUME_SPIKE_THRESHOLD=2.0

[NOTIFICATION]
# 거래 알림 설정
TRADE_NOTIFICATION=true
ERROR_NOTIFICATION=true
DAILY_REPORT=true

# 알림 빈도 제한
MAX_NOTIFICATIONS_PER_HOUR=10
DUPLICATE_NOTIFICATION_INTERVAL=300

[BACKTEST]
# 백테스트 설정
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2024-12-31
INITIAL_CAPITAL=10000000
COMMISSION_RATE=0.00015

[ADVANCED]
# 고급 설정
API_RATE_LIMIT=20
RETRY_COUNT=3
RETRY_DELAY=1.0

# 로깅 설정
DETAILED_LOGGING=true
TRADE_LOG_RETENTION_DAYS=90

[PERFORMANCE]
# 캐시 정책 설정
cache_ttl_seconds = 2  # 모든 컴포넌트 공통 캐시 유효시간 (초)
price_cache_size = 100  # 가격 캐시 최대 크기
enable_cache_debug = false  # 캐시 디버그 로그 활성화

# 기본 전략 설정
volume_increase_threshold = 2.0
volume_min_threshold = 100000
pattern_score_threshold = 70.0
max_holding_days = 1

# 🆕 KIS 공식 문서 기반 고급 매매 지표 임계값
contract_strength_threshold = 120.0    # 체결강도 임계값
buy_ratio_threshold = 45.0            # 매수비율 임계값 (퍼센트) - 60에서 45로 완화
vi_activation_threshold = true         # VI 발동 시 거래 중단 여부
market_pressure_weight = 0.3          # 시장압력 가중치
spread_threshold = 0.01               # 호가 스프레드 임계값 (1퍼센트)

# 고급 매도 조건 임계값
weak_contract_strength_threshold = 80.0  # 체결강도 하락 매도 임계값
low_buy_ratio_threshold = 30.0          # 매수비율 하락 매도 임계값
high_volatility_threshold = 5.0         # 고변동성 매도 임계값 (퍼센트)
price_decline_from_high_threshold = 0.03 # 고점 대비 하락 매도 임계값 (3퍼센트)

# 🆕 RealTimeMonitor 모니터링 설정
fast_monitoring_interval = 3          # 빠른 모니터링 주기 (초)
normal_monitoring_interval = 10       # 일반 모니터링 주기 (초)
market_volatility_threshold = 0.02    # 고변동성 감지 임계값 (2퍼센트)
high_volume_threshold = 3.0           # 고거래량 감지 임계값 (3배)
high_volatility_position_ratio = 0.3  # 고변동성 종목 비율 임계값 (30퍼센트)

# 🆕 종목 관리 설정
max_premarket_selected_stocks = 10    # 장전 선정 종목 최대 수
max_intraday_selected_stocks = 10     # 장중 선정 종목 최대 수
max_total_observable_stocks = 20      # 총 관찰 종목 최대 수 (웹소켓 한도 고려)
intraday_scan_interval_minutes = 10   # 장중 스캔 간격 (분)

# 🆕 웹소켓 연결 설정
websocket_max_connections = 41        # KIS 웹소켓 최대 연결 수
websocket_connections_per_stock = 2   # 종목당 웹소켓 연결 수 (호가+체결가)
websocket_system_connections = 1      # 시스템용 웹소켓 연결 수 (체결통보)

# 🆕 시장 시간 설정
market_open_hour = 9                  # 시장 개장 시간 (시)
market_open_minute = 0               # 시장 개장 시간 (분)
market_close_hour = 15               # 시장 마감 시간 (시)
market_close_minute = 30             # 시장 마감 시간 (분)
day_trading_exit_hour = 15           # 데이트레이딩 종료 시간 (시)
day_trading_exit_minute = 0          # 데이트레이딩 종료 시간 (분)
pre_close_hour = 14                  # 마감 전 시간 (시)
pre_close_minute = 50                # 마감 전 시간 (분)

# 🆕 TradingConditionAnalyzer 매수 조건 설정
opening_volume_multiplier = 1.5       # 장 초반 거래량 임계값 배수
opening_price_threshold = 0.015       # 장 초반 가격 임계값 (1.5%)
opening_contract_strength_multiplier = 1.2  # 장 초반 체결강도 배수
opening_buy_ratio_multiplier = 1.1    # 장 초반 매수비율 배수

preclose_volume_multiplier = 2.0      # 마감 전 거래량 임계값 배수
preclose_price_threshold = 0.02       # 마감 전 가격 임계값 (2%)
preclose_contract_strength_multiplier = 1.5  # 마감 전 체결강도 배수
preclose_buy_ratio_multiplier = 1.2   # 마감 전 매수비율 배수

normal_price_threshold = 0.01         # 일반 시간 가격 임계값 (1%)
opening_pattern_score_threshold = 55.0 # 장 초반 패턴 점수 임계값 - 75에서 55로 완화
normal_pattern_score_threshold = 50.0  # 일반 시간 패턴 점수 임계값 - 70에서 50으로 완화

# 🆕 이격도 기반 매수/매도 조건
opening_divergence_threshold = -3.5   # 장 초반 이격도 임계값 (%)
opening_daily_position_threshold = 25 # 장 초반 일봉 위치 임계값 (%)
preclose_divergence_threshold = -4.0  # 마감 전 이격도 임계값 (%)
preclose_daily_position_threshold = 20 # 마감 전 일봉 위치 임계값 (%)
normal_divergence_threshold = -2.5    # 일반 시간 이격도 임계값 (%)
normal_daily_position_threshold = 35  # 일반 시간 일봉 위치 임계값 (%)

# 매도 이격도 조건
sell_overheated_threshold = 5.0       # 과열 매도 이격도 임계값 (%)
sell_overheated_threshold_preclose = 4.0 # 마감 전 과열 매도 이격도 임계값 (%)
sell_high_position_threshold = 80.0   # 과열 매도 일봉 위치 임계값 (%)
sell_high_position_threshold_preclose = 75.0 # 마감 전 과열 매도 일봉 위치 임계값 (%)
sell_mild_overheated_threshold = 3.0  # 중간 과열 매도 이격도 임계값 (%)
sell_mild_position_threshold = 70.0   # 중간 과열 매도 일봉 위치 임계값 (%)

# 🆕 매도 조건 설정
emergency_stop_loss_rate = -5.0       # 응급 손절률 (%)
emergency_volatility_threshold = 3.0  # 응급 매도 변동성 임계값 (%)
preclose_profit_threshold = 0.5       # 마감 전 익절 임계값 (%)
long_hold_minutes = 180               # 장시간 보유 기준 (분)
long_hold_profit_threshold = 0.3      # 장시간 보유 익절 임계값 (%)
market_pressure_sell_loss_threshold = -1.0 # 시장압력 매도 손실 임계값 (%)
max_holding_minutes = 240             # 최대 보유 시간 (분)
opportunity_cost_min_loss = -2.0      # 기회비용 매도 최소 손실 (%)
opportunity_cost_max_profit = 1.0     # 기회비용 매도 최대 수익 (%)
conservative_win_rate_threshold = 0.3 # 보수적 매도 승률 임계값 (30%)
conservative_profit_threshold = 0.8   # 보수적 익절 임계값 (%)
conservative_stop_threshold = -1.5    # 보수적 손절 임계값 (%)

# 🆕 시간 기반 손절 설정
time_stop_30min_multiplier = 1.0      # 30분 이내 손절 배수
time_stop_2hour_multiplier = 0.8      # 2시간 이내 손절 배수
time_stop_4hour_multiplier = 0.6      # 4시간 이내 손절 배수
time_stop_over4hour_multiplier = 0.4  # 4시간 초과 손절 배수

# 🆕 성능 로깅 설정
performance_log_interval_minutes = 5  # 성능 로깅 간격 (분)
status_report_interval_minutes = 1    # 상태 리포트 간격 (분)
stuck_order_check_interval_seconds = 30 # 정체 주문 체크 간격 (초)
test_mode_log_interval_cycles = 100   # 테스트 모드 로그 간격 (사이클)

# 🆕 점수 기반 매수 조건 설정 (이격도 중심, 100점 만점)
buy_score_opening_threshold = 45      # 장 초반 매수 점수 기준 (100점 만점) - 65에서 45로 완화
buy_score_preclose_threshold = 50     # 마감 전 매수 점수 기준 (100점 만점) - 70에서 50으로 완화
buy_score_normal_threshold = 40       # 일반 시간 매수 점수 기준 (100점 만점) - 60에서 40으로 완화

# 🆕 데이트레이딩 특화 설정
max_spread_threshold = 0.05           # 최대 호가 스프레드 임계값 (5%)
min_momentum_opening = 12             # 장 초반 최소 모멘텀 점수 - 20에서 12로 완화
min_momentum_preclose = 15            # 마감 전 최소 모멘텀 점수 - 25에서 15로 완화
min_momentum_normal = 8               # 일반 시간 최소 모멘텀 점수 - 15에서 8로 완화

# 과매수 허용 설정 (RSI 높아도 모멘텀 있으면 매수 가능)
allow_overbought_momentum = true      # 과매수 상황에서도 강한 모멘텀 시 매수 허용
overbought_momentum_threshold = 3.0   # 과매수 허용 모멘텀 임계값 (%)
max_divergence_for_buy = 5.0         # 매수 허용 최대 이격도 (20일선 대비 %) 